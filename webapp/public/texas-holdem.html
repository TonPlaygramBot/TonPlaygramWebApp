<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no" />
  <title>Texas Hold'em Royale</title>
  <style>
    :root{
      --shadow:rgba(0,0,0,.45);
      --card-scale:0.85; --avatar-scale:1;
      --card-w: calc(clamp(44px, 9.6vw, 70px) * var(--card-scale));
      --card-h: calc(var(--card-w)*1.45);
      --avatar-size: calc(54px * var(--avatar-scale));
    }
    *{box-sizing:border-box;font-family:'Luckiest Guy','Comic Sans MS',cursive;-webkit-text-stroke:.3px #000;text-shadow:0 0 4px #000}
    html,body{height:100%;margin:0}
    body{
      color:#fff; overflow:hidden; height:100vh; width:100vw;
    }
    .stage{ position:relative; width:100vw; height:100vh; display:grid; place-items:center; perspective:1100px; }
      .stage::before{ content:""; position:absolute; top:0; bottom:0; left:1vw; right:1vw; background: url('assets/icons/de2a24a7-922a-4400-8edc-027a1017224e.webp') center/cover no-repeat; z-index:0 }
      .center{ position:absolute; left:50%; top:44%; transform:translate(-50%,-50%); display:flex; gap:10px; z-index:2; --card-scale:1.1; }
      .seats{ position:absolute; inset:0; z-index:2 }
      .seat{ position:absolute; display:flex; flex-direction:column; align-items:center; gap:6px; width:clamp(120px, 28vw, 200px) }
      .seat.small{ --card-scale:.8; }
      .avatar{ width:var(--avatar-size); height:var(--avatar-size); border-radius:50%; display:grid; place-items:center; background:radial-gradient(circle at 30% 30%, #fff, #ddd 40%, #bbb 60%, #999 100%); color:#111; font-size:28px; border:4px solid #000; box-shadow:0 8px 20px var(--shadow); overflow:hidden; position:relative }
      .avatar-wrap{ position:relative; width:var(--avatar-size); height:var(--avatar-size); display:grid; place-items:center; }
      .timer-ring{ position:absolute; inset:-6px; border-radius:50%; background:conic-gradient(#f5cc4e var(--progress,0deg), transparent 0); -webkit-mask:radial-gradient(farthest-side,transparent calc(100% - 6px),#000 calc(100% - 6px)); mask:radial-gradient(farthest-side,transparent calc(100% - 6px),#000 calc(100% - 6px)); pointer-events:none }
      .cards{ display:flex; gap:6px; flex-wrap:nowrap }
      .card{ width:var(--card-w); height:var(--card-h); border-radius:10px; position:relative; flex:0 0 auto; background:#fff; color:#111; font-weight:900; letter-spacing:.3px; box-shadow:0 10px 25px var(--shadow), inset 0 0 0 2px rgba(0,0,0,.08); touch-action:none }
      .card .corner{ position:absolute; display:flex; flex-direction:column; align-items:center }
      .card .tl{ left:8px; top:6px }
      .card .br{ right:8px; bottom:8px; transform:rotate(180deg) }
      .card .corner .rank{ font-size:calc(var(--card-w)*0.28); line-height:1 }
      .card .corner .suit{ font-size:calc(var(--card-w)*0.18); line-height:1 }
      .card .big{ position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); font-size:calc(var(--card-w)*0.52); opacity:.9; filter:drop-shadow(0 0 2px rgba(0,0,0,.4)) }
      .red{ color:#d12d2d }
      .joker{ background:repeating-linear-gradient(45deg,#eee,#eee 6px,#ddd 6px,#ddd 12px); }
      .selected{ outline:3px solid #0ea5e9; transform:translateY(-6px); }
      .suggested{ outline:3px dashed #2563eb; }
      .card.back{ background:url('assets/icons/file_00000000bc2862439eecffff3730bbe4.webp') center/60% no-repeat, repeating-linear-gradient(45deg,#233,#233 6px,#122 6px,#122 12px); border:2px solid rgba(255,255,255,.5); color:transparent; }
      .card.back::before{ content:""; position:absolute; inset:6px; border-radius:8px; border:2px dashed rgba(255,255,255,.35); }
/* Winner highlight styles + seating layout */

.card.winning { outline: 3px solid #facc15; background: #fef08a; }

.community .card.winning { transform: translateY(-12px); }

.seat.winner .avatar { box-shadow: 0 0 12px #facc15; border-color: #facc15; }

.seat.winner .name { color: #facc15; }

.moving-card{position:absolute;transition:left .4s ease, top .4s ease;z-index:1000;pointer-events:none;}
.seat-inner .cards.turn{box-shadow:0 0 12px #facc15;border-color:#facc15;}

.action-text{font-weight:700;min-height:1em}
.action-text.fold{color:#dc2626;text-shadow:-1px -1px 0 #fff,1px -1px 0 #fff,-1px 1px 0 #fff,1px 1px 0 #fff}
.action-text.call{color:#16a34a;text-shadow:-1px -1px 0 #fff,1px -1px 0 #fff,-1px 1px 0 #fff,1px 1px 0 #fff}
.action-text.check{color:#facc15;text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000}
.action-text.raise{color:#2563eb;text-shadow:-1px -1px 0 #fff,1px -1px 0 #fff,-1px 1px 0 #fff,1px 1px 0 #fff}

.seat.bottom { bottom: 0.5%; left: 50%; transform: translateX(-50%); }

.seat.top { top: 1%; left: 50%; transform: translateX(-50%); }

.seat.left { left: 16%; top: 28%; transform: translate(-50%, -50%); --card-scale: .85; }

.seat.right { left: 84%; top: 28%; transform: translate(-50%, -50%); }

    .seat.bottom-left { left: 16%; top: 62%; transform: translate(-50%, -50%); --card-scale: .85; }

    .seat.bottom-right { left: 84%; top: 62%; transform: translate(-50%, -50%); }
    .seat-inner{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:6px;
      border:4px solid #000;
      border-radius:12px;
      padding:4px;
      background:#f5f5dc;
      box-shadow:4px 4px 0 #d4ccb3;
    }
    .seat-inner .avatar{ box-shadow:0 0 0 4px #000; }
    .seat-inner .name{
      padding:2px 6px;
      border:2px solid #000;
      border-radius:6px;
      font-size:12px;
      max-width:100%;
      white-space:nowrap;
      overflow:hidden;
      text-align:center;
      background:#fff;
      color:#000;
      font-weight:700;
      text-shadow:-1px -1px 0 #fff,1px -1px 0 #fff,-1px 1px 0 #fff,1px 1px 0 #fff;
    }
    .seat-inner .cards{ padding:4px; border:2px solid #000; border-radius:8px; background:#fef08a; }
    .seat-inner .card{ border:2px solid #000; }
      .seat.bottom .cards{ gap:0 }
      .timer{ font-weight:800; background:rgba(0,0,0,.5); padding:2px 6px; border-radius:8px; }
      .controls{ display:flex; gap:8px; margin-top:8px; align-items:flex-end; justify-content:center; z-index:5; }
      .controls button{ width:var(--avatar-size); height:var(--avatar-size); padding:0; border:4px solid #000; border-radius:50%; background:#2563eb; color:#fff; font-weight:600; font-size:12px; display:flex; align-items:center; justify-content:center; }
      button:disabled{ background:#d1d5db !important; color:#9ca3af !important; }
      #raise{ background:#2563eb; }
      #check{ background:#facc15; }
      #call{ background:#16a34a; }
      #fold{ background:#dc2626; }
        .raise-container{
          position:absolute;
          bottom:0;
          left:2%;
          z-index:5;
          display:flex;
          flex-direction:column;
          align-items:flex-start;
          justify-content:flex-end;
          gap:8px;
          padding:0;
          padding-top:4px;
          padding-right:4px;
          border:none;
          border-radius:0;
          background:none;
        }
        .slider-container{
          position:absolute;
          bottom:6%;
          right:1%;
          z-index:5;
          display:flex;
          flex-direction:column;
          align-items:center;
          gap:8px;
          padding:0;
          border:none;
          border-radius:0;
          background:none;
        }
    .raise-btn{ width:var(--avatar-size); height:var(--avatar-size); padding:0; border:4px solid #000; border-radius:50%; background:#2563eb; color:#fff; font-weight:600; font-size:12px; display:flex; align-items:center; justify-content:center; }
    .raise-amount{ font-size:10px; margin-top:2px; }
    .chip-grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:4px; }
      .raise-container .chip{ position:static; left:auto; top:auto; cursor:pointer; border:2px solid transparent; width:calc(var(--avatar-size)/1.35); height:calc(var(--avatar-size)/1.35); }
      .raise-container .chip:active{ border-color:#0ea5e9; }
    .raise-info{ display:flex; align-items:center; gap:4px; }
      .undo-chip{ width:calc(var(--avatar-size)/1.3); height:calc(var(--avatar-size)/1.3); border:2px solid #000; border-radius:4px; display:flex; align-items:center; justify-content:center; background:#facc15; color:#000; font-weight:700; cursor:pointer; }
    .slider-wrap{ width:100%; display:flex; flex-direction:column; align-items:center; gap:4px; }
    .slider-wrap input[type=range]{ width:100%; }
    #allIn{ background:#dc2626; padding:2px 8px; border:2px solid #000; border-radius:8px; font-weight:600; font-size:12px; }
    .tpc-total{ position:absolute; top:8px; left:8px; font-size:16px; display:flex; align-items:center; gap:4px; }
    .tpc-total img{ width:36px; height:36px; transform:translateY(-2px); }
    #status{ position:absolute; top:55%; left:50%; transform:translate(-50%, 0); z-index:2; font-weight:900; letter-spacing:.3px; white-space:nowrap; }
    .status-default{ color:#ff0; text-shadow:0 2px 6px #000; -webkit-text-stroke:1.5px #000 }
    .tpc-inline-icon{ width:1em; height:1em; margin-left:2px; transform:translateY(2px); }
    .top-controls{position:absolute;top:8px;right:8px;display:flex;flex-direction:column;gap:8px;z-index:10}
    .top-controls button{width:44px;height:44px;padding:0;border:2px solid #000;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#2563eb;color:#fff;font-weight:600}
    .top-controls button img{width:24px;height:24px}
    .seat.vacant .vacant-seat{width:var(--avatar-size);height:var(--avatar-size);border-radius:50%;border:4px solid #000;background:#facc15;color:#16a34a;font-weight:700;display:flex;align-items:center;justify-content:center}

    .pot-wrap{ position:absolute; left:50%; top:33%; transform:translate(-50%,-50%); display:flex; flex-direction:column; align-items:center; gap:4px; z-index:2; }
    .pot{ display:flex; gap:6px; }
    .pot-total{ font-size:14px; }
    .chip-pile{ position:relative; width:calc(var(--avatar-size)/1.7); height:calc(var(--avatar-size)/1.7); }
    .chip{ position:absolute; left:0; width:calc(var(--avatar-size)/1.7); height:calc(var(--avatar-size)/1.7); border-radius:50%; background-size:cover; background-position:center; background-repeat:no-repeat; box-shadow:0 2px 4px rgba(0,0,0,.4); }
    .chip.v1{ background-image:url('assets/icons/1chips.webp'); }
    .chip.v2{ background-image:url('assets/icons/20250820_071739.webp'); }
    .chip.v5{ background-image:url('assets/icons/5chips.webp'); }
    .chip.v10{ background-image:url('assets/icons/10chips.webp'); }
    .chip.v20{ background-image:url('assets/icons/20chips.webp'); }
    .chip.v50{ background-image:url('assets/icons/50chips.webp'); }
    .chip.v200{ background-image:url('assets/icons/200chips.webp'); }
    .chip.v500{ background-image:url('assets/icons/500chips.webp'); }
    .chip.v1000{ background-image:url('assets/icons/1000chips.webp'); }
    .moving-pot{ position:absolute; transition:left .5s ease, top .5s ease; display:flex; gap:6px; }
    .folded-area{ display:none; }
  </style>
</head>
<body>
    <div class="stage">
      <div class="center community" id="community"></div>
      <div class="folded-area" id="foldedArea">
        <div id="foldedLabel" class="folded-label" style="display:none">Folded</div>
        <div id="foldedCards" class="folded-cards"></div>
      </div>
      <div class="pot-wrap" id="potWrap">
        <div class="pot" id="pot"></div>
        <div class="pot-total" id="potTotal"></div>
      </div>
      <div id="status"></div>
      <div class="seats" id="seats"></div>
    </div>
  <audio id="sndTimer" src="https://cdn.jsdelivr.net/gh/naptha/tiny-sound@master/sounds/beep1.ogg"></audio>
  <audio id="sndCallRaise" src="assets/sounds/Callraischip.mp3"></audio>
  <audio id="sndAllIn" src="assets/sounds/allinpushchips2-39133.mp3"></audio>
  <audio id="sndFlip" src="assets/sounds/flipcard-91468.mp3"></audio>
  <audio id="sndKnock" src="assets/sounds/wooden-door-knock-102902.mp3"></audio>
  <div class="top-controls">
    <button id="lobbyIcon"><img src="assets/icons/texas-holdem.svg" alt="Lobby"/></button>
    <button id="leaveSeatBtn">Leave</button>
  </div>
    <script src="/flag-emojis.js"></script>
    <script src="/falling-ball-api.js"></script>
    <script type="module" src="/texas-holdem.js"></script>
</body>
</html>
