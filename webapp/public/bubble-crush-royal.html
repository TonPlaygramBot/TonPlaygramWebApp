<!doctype html><html><head><meta charset='UTF-8'><meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no'><title>Bubble Crush Royal</title><style>body{margin:0;background:#090b13;color:#fff;font-family:system-ui;display:flex;flex-direction:column;align-items:center}h1{font-size:20px;margin:12px 0 6px}canvas{background:#101827;border:2px solid #22d3ee;border-radius:12px;touch-action:none}p{margin:4px 0 8px}</style></head><body><h1>Bubble Crush Royal</h1><p>Tap groups of 2+ same color Â· Score: <span id='s'>0</span></p><canvas id='c' width='360' height='620'></canvas><script>const W=9,H=13,S=40,c=document.getElementById('c'),x=c.getContext('2d');let score=0;const C=['#ef4444','#3b82f6','#22c55e','#f59e0b','#a855f7'];let g=[];function fill(){g=Array.from({length:H},()=>Array.from({length:W},()=>Math.floor(Math.random()*C.length)));}function draw(){x.clearRect(0,0,360,620);x.fillStyle='#0f172a';x.fillRect(0,0,360,620);for(let y=0;y<H;y++)for(let z=0;z<W;z++){const v=g[y][z];if(v<0)continue;x.fillStyle=C[v];x.beginPath();x.arc(z*S+20,y*S+20,16,0,7);x.fill();}requestAnimationFrame(draw);}function flood(sx,sy,col,seen){const k=sx+','+sy;if(sx<0||sy<0||sx>=W||sy>=H||g[sy][sx]!==col||seen.has(k))return[];seen.add(k);return [[sx,sy],...flood(sx+1,sy,col,seen),...flood(sx-1,sy,col,seen),...flood(sx,sy+1,col,seen),...flood(sx,sy-1,col,seen)];}function grav(){for(let x0=0;x0<W;x0++){let col=[];for(let y=H-1;y>=0;y--)if(g[y][x0]>=0)col.push(g[y][x0]);for(let y=H-1,i=0;y>=0;y--,i++)g[y][x0]=i<col.length?col[i]:Math.floor(Math.random()*C.length);}}c.addEventListener('pointerdown',e=>{const r=c.getBoundingClientRect(),px=(e.clientX-r.left)*(c.width/r.width),py=(e.clientY-r.top)*(c.height/r.height);const x0=Math.floor(px/S),y0=Math.floor(py/S);if(x0<0||y0<0||x0>=W||y0>=H)return;const col=g[y0][x0];const grp=flood(x0,y0,col,new Set());if(grp.length<2)return;for(const [gx,gy] of grp)g[gy][gx]=-1;score+=grp.length*grp.length;document.getElementById('s').textContent=score;grav();});fill();draw();</script></body></html>
