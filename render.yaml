services:
  - type: web
    runtime: node
    name: tonplaygram-api
    branch: main
    rootDir: bot
    buildCommand: npm install && npm --prefix ../webapp install && npm --prefix ../webapp run build
    startCommand: npm start
    envVars:
      - key: MONGO_URI
        fromSecret: MONGO_URI
      - key: BOT_TOKEN
        fromSecret: BOT_TOKEN
      # Recommended (set these in Render, even if some are optional):
      - key: ALLOWED_ORIGINS
        fromSecret: ALLOWED_ORIGINS
      - key: API_AUTH_TOKEN
        fromSecret: API_AUTH_TOKEN
      - key: OWNER_TELEGRAM_ID
        fromSecret: OWNER_TELEGRAM_ID
      - key: WITHDRAW_ENABLED
        fromSecret: WITHDRAW_ENABLED
      - key: CLAIM_CONTRACT_ADDRESS
        fromSecret: CLAIM_CONTRACT_ADDRESS
      - key: CLAIM_WALLET_MNEMONIC
        fromSecret: CLAIM_WALLET_MNEMONIC
      - key: RPC_URL
        fromSecret: RPC_URL

